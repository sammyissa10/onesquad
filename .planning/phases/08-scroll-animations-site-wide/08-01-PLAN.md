---
phase: 08-scroll-animations-site-wide
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/scrollAnimations.ts
  - src/components/sections/Hero.tsx
  - src/components/sections/Features.tsx
  - src/components/sections/ServicesPreview.tsx
  - src/components/sections/Comparison.tsx
autonomous: true

must_haves:
  truths:
    - "Animation preset functions exist and can be imported by any page"
    - "Homepage hero uses GSAP ScrollTrigger instead of Framer Motion variants"
    - "Features section cards stagger in with GSAP (not Framer Motion stagger)"
    - "ServicesPreview cards use glow-style entrance (scale or clip-path, not fadeIn)"
    - "Comparison columns slide in from left/right using GSAP ScrollTrigger (not Framer Motion useScroll)"
  artifacts:
    - path: "src/lib/scrollAnimations.ts"
      provides: "Reusable GSAP scroll animation presets"
      exports: ["fadeUp", "scaleReveal", "clipReveal", "slideFromLeft", "slideFromRight", "staggerFadeUp"]
    - path: "src/components/sections/Hero.tsx"
      provides: "GSAP-animated homepage hero"
      contains: "useScrollAnimation"
    - path: "src/components/sections/Features.tsx"
      provides: "GSAP-animated features section"
      contains: "useScrollAnimation"
    - path: "src/components/sections/ServicesPreview.tsx"
      provides: "GSAP-animated services preview"
      contains: "useScrollAnimation"
    - path: "src/components/sections/Comparison.tsx"
      provides: "GSAP-animated comparison section"
      contains: "useScrollAnimation"
  key_links:
    - from: "src/lib/scrollAnimations.ts"
      to: "src/lib/gsap.ts"
      via: "imports gsap and ScrollTrigger"
      pattern: "import.*gsap.*from.*@/lib/gsap"
    - from: "src/components/sections/Hero.tsx"
      to: "src/hooks/useScrollAnimation.ts"
      via: "hook usage with scope ref"
      pattern: "useScrollAnimation"
---

<objective>
Create reusable GSAP scroll animation presets and apply varied scroll-driven reveals to the first half of homepage sections (Hero, Features, ServicesPreview, Comparison).

Purpose: Establish the animation preset library and demonstrate varied scroll effects on the most visible page. Each section gets a distinct animation personality — no two sections animate the same way.

Output: `scrollAnimations.ts` preset library + 4 homepage sections converted from Framer Motion to GSAP ScrollTrigger.
</objective>

<execution_context>
@C:/Users/sammy/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/sammy/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-scroll-animations-site-wide/08-RESEARCH.md
@src/lib/gsap.ts
@src/hooks/useScrollAnimation.ts
@src/lib/animations.ts
@src/components/sections/Hero.tsx
@src/components/sections/Features.tsx
@src/components/sections/ServicesPreview.tsx
@src/components/sections/Comparison.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create scroll animation presets library</name>
  <files>src/lib/scrollAnimations.ts</files>
  <action>
Create `src/lib/scrollAnimations.ts` with reusable GSAP animation preset functions. These are NOT ScrollTrigger creators — they return animation config objects that sections consume via useScrollAnimation.

Export these preset functions (each returns { from, config } objects that gsap.from() can use):

1. `fadeUp(opts?)` — opacity:0, y:50, duration:0.6, ease:'power2.out' (default reveal for text blocks)
2. `scaleReveal(opts?)` — opacity:0, scale:0.92, duration:0.5, ease:'power2.out' (for cards, grid items)
3. `clipReveal(direction?)` — clipPath inset reveal (top-down, left-right, bottom-up variants), duration:1.0, ease:'power2.out' (for images, hero accents)
4. `slideFromLeft(opts?)` — opacity:0, x:-60, duration:0.7, ease:'power3.out' (for comparison columns)
5. `slideFromRight(opts?)` — opacity:0, x:60, duration:0.7, ease:'power3.out' (for comparison columns)
6. `staggerFadeUp(opts?)` — returns stagger config object: { each: 0.08, from: 'start' } merged with opts

Also export a `TRIGGERS` object with common ScrollTrigger start positions:
- `standard: 'top 80%'` (most sections)
- `early: 'top 85%'` (headlines)
- `late: 'top 70%'` (grids, cards)
- `hero: 'top 95%'` (near-immediate for above-fold)

Each function should accept optional overrides (duration, delay, ease, y, etc.) and merge them.

Import gsap from '@/lib/gsap' — do NOT import ScrollTrigger here (presets are config objects, not trigger creators).

Keep the file focused: pure functions returning animation configs. No React, no hooks, no side effects.
  </action>
  <verify>
File exists at src/lib/scrollAnimations.ts. TypeScript compiles without errors: `npx tsc --noEmit src/lib/scrollAnimations.ts` (or check via `npm run build` if available). All 6 preset functions are exported.
  </verify>
  <done>scrollAnimations.ts exports fadeUp, scaleReveal, clipReveal, slideFromLeft, slideFromRight, staggerFadeUp, and TRIGGERS object. All functions return plain config objects.</done>
</task>

<task type="auto">
  <name>Task 2: Convert Hero section to GSAP ScrollTrigger</name>
  <files>src/components/sections/Hero.tsx</files>
  <action>
Replace Framer Motion animation in Hero.tsx with GSAP ScrollTrigger via useScrollAnimation hook.

Current state: Uses Framer Motion `motion.div` with `gridVariants`/`blockVariants` (staggerChildren: 0.12) + MotionConfig reducedMotion="user".

Target animation: The hero is above-fold, so use immediate entrance (no scroll trigger needed for the main content — it's visible on load). Use `useScrollAnimation` with a very early trigger (`top 95%`) or animate on mount.

Implementation:
1. Remove `import { motion, MotionConfig } from "framer-motion"` and the gridVariants/blockVariants objects
2. Add `import { useScrollAnimation } from '@/hooks/useScrollAnimation'`
3. Add `import { fadeUp, TRIGGERS } from '@/lib/scrollAnimations'`
4. Replace `<MotionConfig reducedMotion="user">` wrapper — useScrollAnimation already handles reduced motion
5. Convert the section to use a ref from useScrollAnimation:
   ```
   const { scope } = useScrollAnimation(({ gsap }) => {
     // Headline block: fade up with slight delay
     gsap.from('.hero-headline', { ...fadeUp(), scrollTrigger: { trigger: '.hero-grid', start: TRIGGERS.hero } });
     // Grid blocks: stagger with scale
     gsap.from('.hero-block', { opacity: 0, y: 30, scale: 0.95, duration: 0.5, stagger: { each: 0.1, from: 'start' }, scrollTrigger: { trigger: '.hero-grid', start: TRIGGERS.hero } });
   });
   ```
6. Replace `<motion.div>` elements with plain `<div>` elements, adding CSS classes for GSAP targeting (e.g., `hero-headline`, `hero-block`, `hero-grid`)
7. Add `data-animate` attribute to animated elements (useScrollAnimation's reduced-motion branch uses this)
8. Keep `<section ref={scope}>` as the outermost animated container
9. Keep all existing Tailwind classes, layout structure, links, and content unchanged
10. IMPORTANT: Keep whileHover interactions if any exist as CSS `:hover` transitions (Hero has none currently, just button hover which is separate)

The hero animation should feel like a confident staggered entrance — the headline block appears first (0ms), then grid blocks cascade in (stagger 0.1s each, starting 0.15s after headline).
  </action>
  <verify>
Run `npm run build` — no TypeScript errors. Visit homepage — hero content animates in on load without Framer Motion. No `framer-motion` import remains in Hero.tsx.
  </verify>
  <done>Hero.tsx uses useScrollAnimation with GSAP, no Framer Motion imports. Bento grid blocks stagger in with varied timing. Reduced motion is handled by the hook.</done>
</task>

<task type="auto">
  <name>Task 3: Convert Features, ServicesPreview, and Comparison to GSAP</name>
  <files>
    src/components/sections/Features.tsx
    src/components/sections/ServicesPreview.tsx
    src/components/sections/Comparison.tsx
  </files>
  <action>
Convert three homepage sections from Framer Motion to GSAP ScrollTrigger, each with a DISTINCT animation personality.

**Features.tsx** — Navy section, stacked cards with scale hover
- Current: Framer Motion stagger(0.15) + fadeIn + scaleIn variants, useInView
- Target animation: **Staggered scale reveal** — cards scale from 0.92 with slight y offset
- Remove framer-motion imports, useInView, motion components
- Use useScrollAnimation hook with scope ref on the section
- Heading (left column): `gsap.from('.features-heading', { ...fadeUp({ duration: 0.8 }), scrollTrigger: { trigger: '.features-heading', start: TRIGGERS.early } })`
- Cards (right column): Loop through each card with individual ScrollTriggers using scaleReveal preset + stagger delay: `gsap.utils.toArray('.feature-card').forEach((card, i) => { gsap.from(card, { ...scaleReveal(), delay: i * 0.12, scrollTrigger: { trigger: card, start: TRIGGERS.late } }); });`
- Keep whileHover={{ scale: 1.03 }} as a CSS hover: add `transition-transform duration-200 hover:scale-[1.03]` Tailwind class instead of motion.div whileHover
- Add `data-animate` to animated elements

**ServicesPreview.tsx** — White section, service cards with glow hover
- Current: Framer Motion stagger(0.1) + fadeIn variants, useInView
- Target animation: **Fade up with staggered grid** — cards fade up from below with staggered timing (0.08s between)
- Remove framer-motion imports, replace motion.div with div
- Section heading: fadeUp with early trigger
- Web Solutions cards: staggered fadeUp with `from: 'start'`, 0.08s stagger, `start: TRIGGERS.standard`
- Digital Marketing cards: separate ScrollTrigger, staggered fadeUp with `from: 'center'` (emanate from center), 0.1s stagger
- CTA button: simple fadeUp
- Keep all hover effects as CSS (already implemented as Tailwind group-hover classes)

**Comparison.tsx** — Navy section, two-column comparison with divider
- Current: Framer Motion useScroll/useTransform for parallax slide-in (leftX, rightX, opacity, scale, dividerHeight)
- Target animation: **Directional slide-in** — left column slides from left, right column from right, header scales in
- This is the most dramatic replacement. Remove useScroll, useTransform, motion.div with style bindings
- Header: `gsap.from('.comparison-header', { opacity: 0, scale: 0.85, duration: 0.8, ease: 'power2.out', scrollTrigger: { trigger: '.comparison-header', start: TRIGGERS.standard } })`
- Left column: `gsap.from('.comparison-left', { ...slideFromLeft(), scrollTrigger: { trigger: '.comparison-grid', start: TRIGGERS.standard } })`
- Right column: `gsap.from('.comparison-right', { ...slideFromRight({ delay: 0.2 }), scrollTrigger: { trigger: '.comparison-grid', start: TRIGGERS.standard } })`
- Individual cards within each column: stagger with 0.1s delay per card using individual ScrollTriggers
- Divider: `gsap.from('.comparison-divider-fill', { scaleY: 0, transformOrigin: 'top', duration: 1.5, ease: 'power1.inOut', scrollTrigger: { trigger: '.comparison-grid', start: TRIGGERS.standard, end: 'bottom 30%', scrub: 1 } })` — scrubbed to scroll position for organic feel
- Replace ComparisonCard motion.div whileInView with individual GSAP triggers (already handled by parent stagger or individual loop)
- ComparisonCard whileHover={{ y: -6 }}: replace with Tailwind `hover:-translate-y-1.5 transition-transform duration-300`

For all three files:
- Import `useScrollAnimation` from `@/hooks/useScrollAnimation`
- Import relevant presets from `@/lib/scrollAnimations`
- Remove `import { stagger, fadeIn, scaleIn } from '@/lib/animations'` (Framer Motion presets)
- Remove `import { motion, useInView } from 'framer-motion'` (or similar)
- Replace `<motion.div>` with `<div>` + appropriate CSS class for GSAP targeting
- Add `data-animate` to elements that start hidden (opacity:0)
- Keep all content, copy, links, layout, and Tailwind styling unchanged
  </action>
  <verify>
Run `npm run build` — no TypeScript errors. No `framer-motion` imports remain in Features.tsx, ServicesPreview.tsx, or Comparison.tsx. Visit homepage and scroll — each of the three sections has a distinct entrance animation (scale, fadeUp, slide-in).
  </verify>
  <done>Features uses staggered scale reveals. ServicesPreview uses staggered fadeUp from different origins per category. Comparison uses directional slide-in with scrubbed divider. All three use useScrollAnimation, not Framer Motion.</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. Homepage loads — hero animates on page load
3. Scroll down — Features cards scale in when entering viewport
4. Continue scrolling — ServicesPreview cards fade up with stagger
5. Continue scrolling — Comparison columns slide in from opposite sides
6. No `framer-motion` imports in: Hero.tsx, Features.tsx, ServicesPreview.tsx, Comparison.tsx
7. `scrollAnimations.ts` exists with exported preset functions
8. Reduce motion preference — animated elements are immediately visible (no animation)
</verification>

<success_criteria>
- 5 files created/modified (scrollAnimations.ts + 4 sections)
- 4 distinct scroll animation effects visible on homepage first half
- Zero Framer Motion imports in converted sections
- All scroll animations respect prefers-reduced-motion via useScrollAnimation hook
- Existing hover effects preserved (CSS transitions or kept as-is)
</success_criteria>

<output>
After completion, create `.planning/phases/08-scroll-animations-site-wide/08-01-SUMMARY.md`
</output>
